{# *********************************************
   * POWER Theme Section Team V1.1               
   - Animation on Scroll               
   ********************************************* #}

{%- macro get_aos(aos_el) %}
  {%- if theme.animation.aos.is_aos && module.animation.is_aos && aos_el.animation_type != 'none' %}
    {%- if aos_el.animation_type == 'default' %}
      data-aos="{{ theme.animation.aos.animation_type }}"
    {% else %}
      data-aos="{{ aos_el.animation_type }}"
    {% endif -%} 
    {%- if aos_el.delay %}
      data-aos-delay="{{ aos_el.delay }}"
    {% else %}
      data-aos-delay="{{ theme.animation.aos.delay }}"
    {% endif -%}
  {% endif -%}  
{% endmacro -%}

{%- macro random_int(len) -%}
  {%- for _ in range(len) -%}
    {{ range(10) | random }}
  {%- endfor -%}
{%- endmacro -%}

{% set mhID1 = random_int(10) %}

{# style reduced #}
{% macro get_reduced_style(team, isLink, href) %}
{% if isLink %}
  <a href="{{ href }}" {% if team.link.open_in_new_tab %}target="_blank" rel="noopener"{% endif %} {% if team.link.no_follow %}rel="nofollow"{% endif %} class="pwr-team-member pwr-team-member--style-reduced {% if isLink %}pwr-team-member--is-link{% endif %}" data-mh="{{ mhID1 }}"
    {# Animation on Scroll #}
    {{ get_aos(team.animation) }}       
  >
    <div class="pwr-3D-box pwr--padding-b-md">    
      <div class="pwr-team-member__img pwr-team-member__img--style-reduced pwr-3D-box__sensor pwr-3D-box--shaddow-on-hover lazyload" {% if team.img %}data-bgset="{{ resize_image_url(team.img.src,300) }} 300w, {{ resize_image_url(team.img.src,600) }} 600w" data-sizes="auto"{% endif %}>
        <div class="pwr-team-member__overlay"></div>
        <div class="pwr-team-member__info-box--style-reduced pwr-3D-box__info-box pwr-3D-box__info-box--centered">
          <span class="pwr-team-member__more-link">{{ module.translation.txt_link }}</span>
        </div>
      </div>
    </div>
    <span class="pwr-team-member__name">{{ team.name_ }}</span>
    <span class="pwr-team-member__job-title pwr-team-member__job-title--style-reduced">{{ team.job_title }}</span>
    <span class="pwr-team-member__more-link pwr-team-member__more-link--mobile">{{ module.translation.txt_link }}</span>
  </a>
{% else %}
  <div class="pwr-team-member pwr-team-member--style-reduced" data-mh="{{ mhID1 }}"
    {# Animation on Scroll #}
    {{ get_aos(team.animation) }}       
  >
    <div class="pwr--padding-b-md">    
      <div class="pwr-team-member__img pwr-team-member__img--style-reduced lazyload" {% if team.img %}data-bgset="{{ resize_image_url(team.img.src,300) }} 300w, {{ resize_image_url(team.img.src,600) }} 600w" data-sizes="auto"{% endif %}>
      </div>
    </div>
    <span class="pwr-team-member__name">{{ team.name_ }}</span>
    <span class="pwr-team-member__job-title pwr-team-member__job-title--style-reduced">{{ team.job_title }}</span>
  </div>
{% endif %}
{% endmacro %}

{# style full #}
{% macro get_full_style(team, isLink, href) %}
  <div class="pwr-team-member pwr-team-member--style-full {% if isLink %}pwr-team-member--is-link{% endif %} pwr-touch-btn-container" style="z-index: {{ index }}"
    {# Animation on Scroll #}
    {{ get_aos(team.animation) }}       
  >
    <div class="pwr-3D-box">
      <div class="pwr-team-member__img pwr-team-member__img--style-full pwr-3D-box__sensor pwr-3D-box--shaddow-on-hover lazyload" {% if team.img %}data-bgset="{{ resize_image_url(team.img.src,400) }} 400w, {{ resize_image_url(team.img.src,800) }} 800w" data-sizes="auto"{% endif %}>
        <div class="pwr-team-member__overlay"></div>
        <div class="pwr-touch-btn">{{ module.translation.txt_touch }}<span class="pwr-touch-btn__icon"></span></div>
        <div class="pwr-team-member__info-box--style-full pwr-3D-box__info-box pwr-3D-box__info-box--centered">
          <span class="pwr-team-member__name">{{ team.name_ }}</span>
          <span class="pwr-team-member__job-title pwr-team-member__job-title--style-full">{{ team.job_title }}</span>
          {% if team.description %}
          <span class="pwr-rich-text pwr-team-member__desc">{{ team.description }}</span>
          {% endif %}
          {% if team.contact %}
          <div class="pwr-team-member__contact">
            {% if team.email %}
            <a href="mailto:{{ team.email }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="envelope" style="SOLID" unicode="f0e0" %}</a>
            {% endif %}
            {% if team.phone %}
            <a href="tel:{{ team.phone }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="phone" style="SOLID" unicode="f095" %}</a>
            {% endif %}            
            {% if team.facebook %}
            <a href="{{ team.facebook }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="facebook-f" style="SOLID" unicode="f39e" %}</a>
            {% endif %}
            {% if team.twitter %}  
            <a href="{{ team.twitter }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="twitter" style="SOLID" unicode="f099" %}</a>
            {% endif %}
            {% if team.linkedin %}  
            <a href="{{ team.linkedin }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="linkedin-in" style="SOLID" unicode="f0e1" %}</a>
            {% endif %}
            {% if team.youtube %}  
            <a href="{{ team.youtube }}?rel=author" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="youtube" style="SOLID" unicode="f167" %}</a>
            {% endif %}
            {% if team.skype %}  
            <a href="skype:{{ team.skype }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="skype" style="SOLID" unicode="f17e" %}</a>
            {% endif %}
            {% if team.instagram %}  
            <a href="{{ team.instagram }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="instagram" style="SOLID" unicode="f16d" %}</a>
            {% endif %}
            {% if team.reddit %}  
            <a href="{{ team.reddit }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="reddit-alien" style="SOLID" unicode="f281" %}</a>
            {% endif %}
            {% if team.xing %}  
            <a href="{{ team.xing }}" target="_blank" rel="noopener" class="pwr-social-icon" aria-label="Social Icon">{% icon name="xing" style="SOLID" unicode="f168" %}</a>
            {% endif %}
          </div>
          {% endif %}
          {% if isLink %}
          <a href="{{ href }}" {% if team.link.open_in_new_tab %}target="_blank" rel="noopener"{% endif %} {% if team.link.no_follow %}rel="nofollow"{% endif %} class="pwr-team-member__more-link pwr-team-member__more-link--style-full">{{ module.translation.txt_link }}<span class="pwr-link-icon pwr--padding-l-sm">{% icon name="arrow-right" style="SOLID" unicode="f061" %}</span></a>
          {% endif %}
        </div>
        <div class="pwr-team-member__name-tag">
          <span class="pwr-team-member__name">{{ team.name_ }}</span>
          <span class="pwr-team-member__job-title">{{ team.job_title }}</span>
        </div>
      </div>
    </div>
  </div>
{% endmacro %}



{% if module.style.background == 'color' && module.style.background_color %}
  {% set bgColor = module.style.background_color.color|convert_rgb %}
  {% set bgOpacity = module.style.background_color.opacity|int %}
  {% set bgOpacity = bgOpacity / 100 %}

{% elif module.style.background == 'img_vid' %}
  {% if module.style.background_image || module.style.background_video || module.style.youtube_link %}
    {% set bgImg = module.style.background_image %}
    {% if module.style.background_video %}
      {% set bgVid = module.style.background_video %}
    {% elif  module.style.youtube_link %}
      {% set isYtVid = true %}
      {% set bgVid = module.style.youtube_link %}
    {% endif %}
    {% set bgImgPos  = module.style.background_position %}
    {% set bgVidPos  = 'pwr-video-background--pos-' + module.style.background_position %}

    {% if module.style.background_image_overlay == 'color' %}
      {% set bgOverlayColor = module.style.overlay_color.color|convert_rgb %}
      {% set bgOverlayOpacity = module.style.overlay_color.opacity|int %}
      {% set bgOverlayOpacity = bgOverlayOpacity / 100 %}

    {% elif module.style.background_image_overlay == 'gradient' %}
      {% set bgGradientDir = module.style.overlay_gradient_direction %}
      {% set bgGradientColor1 = module.style.overlay_gradient_color_1.color %}
      {% set bgGradientColor1Opacity = module.style.overlay_gradient_color_1.opacity|int %}
      {% set bgGradientColor1Opacity = bgGradientColor1Opacity / 100 %}
      {% set bgGradientColor2 = module.style.overlay_gradient_color_2.color %}
      {% set bgGradientColor2Opacity = module.style.overlay_gradient_color_2.opacity|int %}
      {% set bgGradientColor2Opacity = bgGradientColor2Opacity / 100 %}

      {% if module.style.overlay_gradient_opacity < 100 %}
        {% set generalOpacity = module.style.overlay_gradient_opacity / 100 %}
        {% set bgGradientColor1Opacity = 1 %}
        {% set bgGradientColor2Opacity = 1 %}
      {% endif %}
    {% endif %}

  {% endif %}

{% elif module.style.background == 'gradient' && module.style.background_gradient_direction %}
  {% set bgGradientDir = module.style.background_gradient_direction %}
  {% set bgGradientColor1 = module.style.background_gradient_color_1.color %}
  {% set bgGradientColor2 = module.style.background_gradient_color_2.color %}
{% endif %}

{% if bgGradientDir == 'hor' %}
  {% set bgGradientDirMozWeb = 'left' %}
  {% set bgGradientDirStd = 'to right' %}
  {% set bgGradientDirIEFb = 1 %}
{% elif bgGradientDir == 'vert' %}
  {% set bgGradientDirMozWeb = 'top' %}
  {% set bgGradientDirStd = 'to bottom' %}
  {% set bgGradientDirIEFb = 0 %}
{% elif bgGradientDir == 'diag_tl_br' %}
  {% set bgGradientDirMozWeb = '-45deg' %}
  {% set bgGradientDirStd = '135deg' %}
  {% set bgGradientDirIEFb = 1 %}
{% elif bgGradientDir == 'diag_bl_tr' %}
  {% set bgGradientDirMozWeb = '45deg' %}
  {% set bgGradientDirStd = '45deg' %}
  {% set bgGradientDirIEFb = 1 %}
{% endif %}

{% if module.anchor_link_id  %}<div class="pwr-anchor" id="{{ module.anchor_link_id }}"></div>{% endif %}
<div class="pwr-sec-team {% if module.layout.section_variant == 'full' %}pwr-sec-team--style-full{% endif %} {% if module.layout.centered %}pwr--align-c{% endif %} {% if module.style.scheme == 'dark' %}pwr--dark{% else %}pwr--light{% endif %} {{ module.layout.padding_top }} {{ module.layout.padding_bottom }} lazyload"
      {# Animation on Scroll #}
      {{ get_aos(module.animation.section) }}       
      {% if bgColor %}style="background-color: rgba({{ bgColor }}, {{ bgOpacity }})"
      {% elif bgImg.src && bgImgPos != 'parallax' %}
      {# Lazy load and resposive images for background-image #}           
      data-bgset="{{ resize_image_url(bgImg.src,theme.performance.images.image_width_xs) }} {{ theme.performance.images.image_width_xs }}w, {{ resize_image_url(bgImg.src,theme.performance.images.image_width_xs * theme.performance.retina_images.image_retina_scaling_factor) }} {{ theme.performance.images.image_width_xs * 2 }}w [(max-width: 575px)] | 
                  {{ resize_image_url(bgImg.src,theme.performance.images.image_width_s) }} {{ theme.performance.images.image_width_s }}w, {{ resize_image_url(bgImg.src,theme.performance.images.image_width_s * theme.performance.retina_images.image_retina_scaling_factor) }} {{ theme.performance.images.image_width_s * 2 }}w [(max-width: 767px)] | 
                  {{ resize_image_url(bgImg.src,theme.performance.images.image_width_m) }} {{ theme.performance.images.image_width_m }}w, {{ resize_image_url(bgImg.src,theme.performance.images.image_width_m * theme.performance.retina_images.image_retina_scaling_factor) }} {{ theme.performance.images.image_width_m * 2 }}w [(max-width: 991px)] | 
                  {{ resize_image_url(bgImg.src,theme.performance.images.image_width_l) }} {{ theme.performance.images.image_width_l }}w, {{ resize_image_url(bgImg.src,theme.performance.images.image_width_l * theme.performance.retina_images.image_retina_scaling_factor) }} {{ theme.performance.images.image_width_l * 2 }}w [(max-width: 1199px)] |
                  {{ resize_image_url(bgImg.src,theme.performance.images.image_max_size * theme.performance.retina_images.image_retina_scaling_factor) }}"
      data-sizes="auto"
      style="background-size: cover;background-position: {{ bgImgPos }};"
     {% elif bgImg.src && bgImgPos == 'parallax' %}
      style="background-color: transparent;"
     {% elif bgGradientDir %}
      style="
            background: {{ bgGradientColor1 }};
            background: -moz-linear-gradient({{ bgGradientDirMozWeb }}, {{ bgGradientColor1 }} 0%, {{ bgGradientColor2 }} 100%);
            background: -webkit-linear-gradient({{ bgGradientDirMozWeb }}, {{ bgGradientColor1 }} 0%, {{ bgGradientColor2 }} 100%);
            background: linear-gradient({{ bgGradientDirStd }}, {{ bgGradientColor1 }} 0%, {{ bgGradientColor2 }} 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='{{ bgGradientColor1 }}', endColorstr='{{ bgGradientColor2 }}',GradientType={{ bgGradientDirIEFb }} );
            "     
     {% endif %}
     >
  {% if bgImg.src && bgImgPos == 'parallax' %}
    <img data-src="{{ bgImg.src }}" class="pwr-parallax lazyload" alt="{{ bgImg.alt }}" width="{% if bgImg.width > 2000 %}2000{% else %}{{ bgImg.width }}{% endif %}">
  {% endif %}
  {% if bgVid %}
  <div class="pwr-video-background {{ bgVidPos }}">
    {% if isYtVid %}
    <div class="pwr-video-background__youtube {% if bgImgPos == 'parallax' %}pwr-parallax{% endif %}">
      <div class="player" data-property="{videoURL:'{{ module.style.youtube_link }}',containment:'self', autoPlay:true, mute:true, showControls: false, useOnMobile: true, playOnlyIfVisible: true}"></div>
    </div>
    {% else %}
    <video autoplay playsinline muted loop src="{{ bgVid }}" class="{% if bgImgPos == 'parallax' %} pwr-parallax{% endif %} lazyload"></video>
    {% endif %}
  </div>
  {% endif %}

  {% if (bgImg.src || bgVid) && module.style.background_image_overlay == 'color' %}
  <div class="pwr--abs-full" style="background-color: rgba({{ bgOverlayColor }}, {{ bgOverlayOpacity }})"></div>
  {% elif (bgImg.src || bgVid) && module.style.background_image_overlay == 'gradient' %}
  <div class="pwr--abs-full" style="
            background: {{ bgGradientColor1 }};
            background: -moz-linear-gradient({{ bgGradientDirMozWeb }}, {{ bgGradientColor1 }} 0%, {{ bgGradientColor2 }} 100%);
            background: -webkit-linear-gradient({{ bgGradientDirMozWeb }}, rgba({{ bgGradientColor1|convert_rgb }}, {{ bgGradientColor1Opacity }}) 0%, rgba({{ bgGradientColor2|convert_rgb  }}, {{ bgGradientColor2Opacity }}) 100%);
            background: linear-gradient({{ bgGradientDirStd }}, rgba({{ bgGradientColor1|convert_rgb  }}, {{ bgGradientColor1Opacity }}) 0%, rgba({{ bgGradientColor2|convert_rgb  }}, {{ bgGradientColor2Opacity }}) 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='{{ bgGradientColor1 }}', endColorstr='{{ bgGradientColor2 }}',GradientType={{ bgGradientDirIEFb }} );
            opacity: {{ generalOpacity }};
            "></div>
  {% endif %}
  <div class="page-center pwr--relative">
    {% if module.intro_to_title || module.title || module.description %}
    <div class="pwr-sec-team__intro-sec">
      {% if module.intro_to_title %}
      <span class="pwr-sec__title-intro pwr-sec__title-intro--narrow pwr-sec-team__title-intro"
        {# Animation on Scroll #}
        {{ get_aos(module.animation.intro_to_title) }}       
        >      
        {{ module.intro_to_title }}
      </span>
      {% endif %}
      {% if module.title_sel_heading && module.title %}
      <{{ module.title_sel_heading }} class="pwr-sec__title pwr-sec__title--narrow pwr-sec-team__title"
        {# Animation on Scroll #}
        {{ get_aos(module.animation.title) }}       
        >{{ module.title }}</{{ module.title_sel_heading }}>
      {% endif %}
      {% if module.description %}
      <span class="pwr-rich-text pwr-sec__desc pwr-sec-team__desc"
        {# Animation on Scroll #}
        {{ get_aos(module.animation.description) }}       
        >      
        {{ module.description }}
      </span>
      {% endif %}
    </div>
    {% endif %}
    <div class="pwr-team-members {% if !module.layout.isTabs %}pwr--neg-margin-lr-10{% endif %} pwr--clearfix">
      {% if module.layout.isTabs %}
      <div class="pwr-tabs"
        {# Animation on Scroll #}
        {{ get_aos(module.animation.tabs) }}       
      >
        <div class="pwr-tabs__header">
          <ul class="pwr-tabs__tab-wrapper {% if module.layout.centered %}pwr-tabs__tab-wrapper--centered{% endif %}">
            {% for tab in module.tabs %}
            <li class="pwr-tabs__tab {% if loop.index == 1 %}pwr-tabs__tab--active{% endif %}" rel="tab{{ loop.index }}">{{ tab.tab_title }}</li>
            {% endfor %}
          </ul>
          <div class="pwr-form pwr-form--style-1 pwr-tabs__dropdown">
            <select>
              {% for tab in module.tabs %}      
              <option value="tab{{ loop.index }}">{{ tab.tab_title }}</option>
              {% endfor %}
            </select>
          </div>      
        </div>
        <div class="pwr-tabs__body pwr--align-l">
          {% for tab in module.tabs %}
          <div id="tab{{ loop.index }}" class="pwr-tabs__content pwr--neg-margin-lr-10 pwr--clearfix">
            {% for team in tab.team %}

            {% if team.link.url.href %}
            {% set isLink = true %}
            {% set href = team.link.url.href %}
            {% if team.link.url.type == "EMAIL_ADDRESS" %}
            {% set href = "mailto:" + href %}
            {% endif %}            
            {% else %}
            {% set isLink = false %}
            {% endif %}

            {% if module.layout.section_variant == 'reduced' %}
            {{ get_reduced_style(team, isLink, href) }}
            {% elif module.layout.section_variant == 'full' %}
            {{ get_full_style(team, isLink, href) }}
            {% endif %}
            {% endfor %}  
          </div>
          {% endfor %}
        </div>
      </div>             
      {% else %}
        {% for team in module.team %}
          {% if team.link.url.href %}
            {% set isLink = true %}
            {% set href = team.link.url.href %}
            {% if team.link.url.type == "EMAIL_ADDRESS" %}
              {% set href = "mailto:" + href %}
            {% endif %}            
          {% else %}
            {% set isLink = false %}
          {% endif %}

          {% if module.layout.section_variant == 'reduced' %}
            {{ get_reduced_style(team, isLink, href) }}
          {% elif module.layout.section_variant == 'full' %}
            {{ get_full_style(team, isLink, href) }}
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>
